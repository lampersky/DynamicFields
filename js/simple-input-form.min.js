function initSimpleInputForm(f,y=!1){f?document.addEventListener("DOMContentLoaded",()=>{let{setValue:t,getValue:r,addEventListener:e,querySelectorAll:n}=f;function o(e){for(var t,r=[],n=/([^\.\[\]]+)|\[(\d+)\]/g;null!==(t=n.exec(e));)void 0!==t[1]?r.push(t[1]):void 0!==t[2]&&r.push(Number(t[2]));return r}function a(e,n=!1){return Array.from(e).reduce((e,t)=>{let r;if("checkbox"===t.type)r=t.checked;else if("radio"===t.type)if(t.checked)r=t.value;else{if(n?((e,t)=>{var r;let n=e;for(r of o(t)){var a=""!==r&&!isNaN(r);if(null==n)return;if(a)n=n[parseInt(r,10)];else if(""===r){if(!Array.isArray(n)||0===n.length)return;n=n[n.length-1]}else n=n[r]}return n})(e,t.name):e.hasOwnProperty(t.name))return e;r=null}else r="SELECT"===t.tagName&&t.multiple?Array.from(t.selectedOptions).map(e=>e.value):t.value;if(n){var i=e;var l=t.name;var s=r;let n=o(l),a=i;n.forEach((e,t)=>{var r=t===n.length-1,t="number"==typeof n[t+1];if("number"==typeof e){for(Array.isArray(a)||(a=[]);a.length<=e;)a.push(null);r?a[e]=s:(null!==a[e]&&"object"==typeof a[e]||(a[e]=t?[]:{}),a=a[e])}else e in a&&"object"==typeof a[e]&&null!==a[e]||(a[e]=t?[]:{}),r?a[e]=s:a=a[e]})}else e[t.name]=r;return e},{})}function i(e,t,r=!1){let n=t;r&&(n=function r(e,n=""){let a={};if(Array.isArray(e))e.forEach((e,t)=>{t=n?n+`[${t}]`:`[${t}]`,"object"==typeof e&&null!==e?Object.assign(a,r(e,t)):a[t]=e});else if(e&&"object"==typeof e)for(var t in e){var i;e.hasOwnProperty(t)&&(i=e[t],t=n?n+"."+t:t,"object"==typeof i&&null!==i?Object.assign(a,r(i,t)):a[t]=i)}else a[n]=e;return a}(t)),Array.from(e).forEach(e=>{let t=n[e.name];void 0!==t&&("checkbox"===e.type?Array.isArray(t)?e.checked=t.includes(e.value):e.checked=Boolean(t):"radio"===e.type?e.checked=e.value===t:"SELECT"===e.tagName&&e.multiple?Array.from(e.options).forEach(e=>{e.selected=t.includes(e.value)}):e.value=t)})}var l;[{parentClass:p="",fieldClass:d="",attribute:l=""}={}]=[];let s=p+` input${d}${l}:not([type="checkbox"]):not([type="radio"]):not([type="range"]), textarea`+d+l,u=([{parentClass:p="",fieldClass:d="",attribute:l=""}={}]=[],p+` select${d}${l}, input${d}${l}[type="checkbox"], input${d}${l}[type="radio"], input${d}${l}[type="range"]`);function c(e){e.forEach(e=>{f.initializedElements.has(e)||(e.inputTypeEvent?e.addEventListener("input",e=>{t(a(f.fields,y))}):e.changeTypeEvent&&e.addEventListener("change",e=>{t(a(f.fields,y))}),f.initializedElements.add(e),f.fields.push(e),i([e],r()??{},y))})}f.initializedElements=new WeakSet,f.fields=[],new MutationObserver(e=>{for(var t of e)"childList"===t.type&&t.addedNodes.forEach(e=>{var t;1===e.nodeType&&(t=[],e.matches(s)?(e.inputTypeEvent=!0,t.push(e)):e.matches(u)&&(e.changeTypeEvent=!0,t.push(e)),t.push(...Array.from(e.querySelectorAll(s),e=>(e.inputTypeEvent=!0,e))),t.push(...Array.from(e.querySelectorAll(u),e=>(e.changeTypeEvent=!0,e))),0<t.length)&&c(t)})}).observe(f.getElement(),{childList:!0,subtree:!0,attributes:!1});var p=Array.from(n(s),e=>(e.inputTypeEvent=!0,e)),d=Array.from(n(u),e=>(e.changeTypeEvent=!0,e));c([...p,...d]),e("value",e=>{i(f.fields,e??{},y)},{init:!0})}):console.error("Missing dynamicFields!")}(()=>{var e,t,r=document?.currentScript;r&&(e=(r=new URL(r.src)).searchParams.get("dynamicField"),r=["1","yes","true"].includes(r.searchParams.get("nested")?.toLowerCase()),e)&&(t=window,initSimpleInputForm(e.split(".").reduce((e,t)=>e?.[t],t),r))})();